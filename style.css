:root{
  --bg:#07060a;
  --panel:#0e1218;
  --gold1:#f6c85f;
  --gold2:#ff9f43;
  --muted:#9aa3b2;
  --glass: rgba(255,255,255,0.03);
}

/* base reset */
*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
body{
  /* ⬅️ GRADIENT BANDING FIX APPLIED HERE */
  background: 
    url('/TaskHero/noise.png'), /* Use a 1px noise image to mitigate banding */
    radial-gradient(1000px 50vh at 10% 10%, #0b1530 0%, #061025 30%, var(--bg) 100%);
  background-repeat: repeat; 
  background-attachment: fixed; 
  
  color:#e6eef8;
  min-height:100vh;
  /* Positioning Fixes */
  padding:1.5rem; 
  margin-top: 1.5rem; 
}

/* app shell */
.app{
  width:100%;
  max-width:clamp(300px, 90%, 960px); 
  margin-left: auto; 
  margin-right: auto; 
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:1rem;
  box-shadow: 0 0.875rem 3.125rem rgba(2,6,23,0.8);
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.02);
}

/* header */
header{
  display:flex;
  flex-wrap:wrap;
  justify-content:space-between;
  align-items:center;
  gap:0.5rem;
  padding:1rem 1.5rem;
  border-bottom:1px solid rgba(255,255,255,0.03);
}

.logo{
  display:flex;
  align-items:center;
  gap:0.5rem;
  flex-shrink:1;
  min-width:0;
}

.shield{
  width:clamp(2rem,8vw,3rem);
  height:clamp(2rem,8vw,3rem);
  border-radius:0.75rem;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  font-size:clamp(1rem,3vw,1.25rem);
  color:#1b1724;
  background:linear-gradient(135deg,var(--gold1), var(--gold2));
  box-shadow:0 0.375rem 1.125rem rgba(255,140,90,0.12);
  flex-shrink:0;
}

.logo h1{
  font-size:clamp(1rem,5vw,1.25rem);
  margin:0;
  color:#ffd;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.header-right{
  display:flex;
  gap:0.875rem;
  align-items:center;
  flex-wrap:wrap;
  justify-content:flex-end;
  min-width:0;
}

.controls{display:flex;gap:0.5rem;align-items:center}

.status{
  display:flex;
  gap:1rem;
  align-items:center;
  flex-shrink:1;
  min-width:0;
}

.status .level{
  font-weight:800;
  color:var(--gold1);
  font-size:clamp(0.75rem,2.5vw,0.875rem);
}

.status .xptext{
  color:var(--muted);
  font-size:clamp(0.625rem,2vw,0.875rem);
}

/* progress */
.progress-wrap{padding:1rem 1.5rem;border-bottom:1px solid rgba(255,255,255,0.02)}
.xp-bar{
  position:relative;height:2.5rem;border-radius:1.25rem;
  background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  box-shadow: inset 0 0.25rem 0.875rem rgba(0,0,0,0.7);
  overflow:hidden;
}
#xpFill{
  position:absolute;left:0;top:0;height:100%;width:0%;
  background:linear-gradient(90deg, #ffd166, #ff7a59);
  border-radius:1.25rem;
  box-shadow: 0 0.375rem 1.375rem rgba(255,150,65,0.08);
  transition: width 1s cubic-bezier(.2,.9,.25,1);
}
.star-icon{
  position:absolute;top:50%;left:0.25rem;transform:translate(-50%,-50%) scale(1.05);
  width:2.25rem;height:2.25rem;border-radius:50%;display:flex;align-items:center;justify-content:center;
  font-size:1.125rem;color:#1b1724;background:linear-gradient(90deg,var(--gold1),var(--gold2));
  box-shadow:0 0.5rem 1.5rem rgba(255,160,70,0.18), inset 0 -0.25rem 0.5rem rgba(255,255,255,0.12);
  transition: transform 0.6s ease, left 0.9s cubic-bezier(.2,.9,.25,1);
  z-index:3;
}
.sparkles{position:absolute;right:0;top:0;bottom:0;pointer-events:none}

/* star gain animation */
.star-gain {
  animation: starPop 700ms ease forwards;
  box-shadow: 0 0 12px #ffd166, 0 0 24px #ff7a59;
}
@keyframes starPop {
  0% { transform: translate(-50%,-50%) scale(0.8) rotate(-10deg); filter: blur(0); }
  50% { transform: translate(-50%,-50%) scale(1.25) rotate(10deg); filter: drop-shadow(0 6px 14px rgba(255,170,60,0.45)); }
  100% { transform: translate(-50%,-50%) scale(1.05) rotate(0deg); filter: none; }
}

/* main layout */
.main-grid{
  display:grid;
  grid-template-columns:1fr minmax(200px, 22vw);
  gap:1rem;
  padding:1.25rem;
}
.left-col{padding-right:0.25rem}
.right-col{padding-left:0.25rem; min-width: 0;}

/* panels */
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:0.875rem;border-radius:0.625rem;margin-bottom:0.875rem;border:1px solid rgba(255,255,255,0.02)}
.add-panel input, .add-panel textarea, .add-panel select{
  width:100%;padding:0.625rem;margin:0.5rem 0;border-radius:0.5rem;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:0.875rem
}
.row{display:flex;gap:0.625rem;flex-wrap:wrap}
.row input[type="number"]{width:45%}
.buttons{justify-content:space-between;margin-top:0.375rem;align-items:center}
.btn{padding:0.5rem 0.75rem;border-radius:0.5rem;border:none;cursor:pointer;background:transparent;color:inherit;font-weight:700}
.btn.primary{background:linear-gradient(90deg,var(--gold1),var(--gold2));color:#231916;box-shadow:0 0.5rem 1.25rem rgba(255,140,60,0.12)}
.btn.ghost{border:1px solid rgba(255,255,255,0.03)}

/* task list */
.task-list{list-style:none;padding:0.5rem;margin:0;max-height:30vh;overflow:auto}
.task-item{display:flex;align-items:center;justify-content:space-between;padding:0.75rem;border-radius:0.5rem;margin-bottom:0.5rem;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.02);cursor:pointer}
.task-title{font-weight:800;font-size:0.9rem}
.task-tag{font-size:0.75rem;padding:0.375rem 0.5rem;border-radius:0.375rem;background:rgba(255,255,255,0.03);color:var(--muted)}
.task-item .small{font-size:0.8125rem;color:var(--muted)}

/* right col: achievements */
.ach-gallery{display:flex;flex-wrap:wrap;gap:0.5rem;padding:0.375rem;list-style:none}
.ach-card{width:clamp(60px,12vw,100px);height:clamp(60px,12vw,100px);border-radius:0.5rem;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:700;color:#ffd}
.ach-card.locked{opacity:0.25;filter:grayscale(60%);color:#999}

/* history list */
.ach-history{list-style:none;padding:0.375rem;margin:0;max-height:20vh;overflow:auto}
.ach-history li{padding:0.5rem;border-radius:0.375rem;background:rgba(255,255,255,0.01);margin-bottom:0.375rem;color:var(--muted)}

/* modal */
.modal{position:fixed;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.55),rgba(0,0,0,0.6));display:flex;align-items:center;justify-content:center;z-index:60}
.modal-card{width:clamp(280px,90%,620px);background:linear-gradient(180deg, rgba(6,9,14,0.98), rgba(10,14,20,0.98));padding:1.125rem;border-radius:0.625rem;border:1px solid rgba(255,255,255,0.03)}
.modal-card h3{margin-top:0;font-size:1rem}
.modal-row{display:flex;align-items:center;gap:0.75rem;margin:0.625rem 0;flex-wrap:wrap}
.file-list{list-style:none;padding:0;margin:0.375rem 0;max-height:25vh;overflow:auto}
.file-list li{padding:0.5rem;border-radius:0.5rem;background:rgba(255,255,255,0.02);margin-bottom:0.375rem;display:flex;gap:0.625rem;align-items:center}
.modal-actions{display:flex;gap:0.625rem;justify-content:flex-end;margin-top:0.875rem}
.close{position:absolute;right:0.75rem;top:0.75rem;background:transparent;border:none;color:#fff;font-size:1.125rem;cursor:pointer}

/* popup */
.popup{position:fixed;right:1.75rem;top:1.75rem;background:linear-gradient(90deg,var(--gold1),var(--gold2));padding:0.75rem 1rem;border-radius:0.625rem;color:#170f0f;font-weight:900;box-shadow:0 0.5rem 1.625rem rgba(0,0,0,0.6);z-index:70}

/* level up banner */
.levelup{position:fixed;left:0;right:0;top:18vh;display:flex;justify-content:center;z-index:80}
.level-canvas{position:absolute;inset:0;width:100%;height:100%;pointer-events:none;border-radius:0.75rem}
.levelup-card{position:relative;z-index:3;background:linear-gradient(90deg,#fff8e6,#fff0d6);color:#2a1406;padding:1.125rem 1.625rem;border-radius:0.75rem;box-shadow:0 0.75rem 2.5rem rgba(0,0,0,0.45);transform:translateY(-20px);opacity:0;transition:all 0.45s ease}
.levelup-card.show{transform:translateY(0);opacity:1;box-shadow:0 1rem 3rem rgba(255,190,70,0.5), 0 0 1.5rem rgba(255,220,100,0.4);}
.levelup-title{font-weight:900;font-size:1.25rem}
.levelup-sub{margin-top:0.375rem;font-weight:700;font-size:1rem}
.levelup-stars{margin-top:0.5rem;font-size:1.125rem;color:#ff9f43}

/* helper */
.hidden{display:none}

/* responsive adjustments */
@media (max-width:960px){
  .main-grid{grid-template-columns:1fr;gap:0.75rem}
  .right-col{order:2}
  .row input[type="number"]{width:100%}
  .ach-card{width:clamp(60px,22vw,100px);height:clamp(60px,22vw,100px);}
}

/* small visuals for sparkles */
.sparkles .spark{
  position:absolute;width:0.375rem;height:0.375rem;border-radius:50%;
  background:rgba(255,240,180,0.9);
  box-shadow:0 0 0.625rem rgba(255,200,80,0.7);
  animation: sparkleFade 0.9s forwards;
}
@keyframes sparkleFade{
  0%{opacity:1;transform:scale(0.6) translateY(0);}
  100%{opacity:0;transform:scale(1.2) translateY(-0.75rem);}
}

